var datatableview=(function(){var b={serverSide:true,paging:true};var g={name:"name","config-sortable":"orderable","config-sorting":"order","config-visible":"visible","config-searchable":"searchable"};var a=true;var f=false;function c(k,l){k.each(function(){var m=$(this);var n=datatableview.getOptions(m,l);m.DataTable(n)});return k}function i(k,o){var p=[];var l=[];k.find("thead th").each(function(){var w=$(this);var s={};for(var t=0;t<w[0].attributes.length;t++){var q=w[0].attributes[t];if(q.specified&&/^data-/.test(q.name)){var r=q.name.replace(/^data-/,"");var v=q.value;r=g[r];if(/^(true|false)/.test(v.toLowerCase())){v=(v==="true")}if(r=="order"){var u=v.split(",");u[1]=parseInt(u[1]);l.push(u);continue}s[r]=v}}p.push(s)});l.sort(function(r,q){return r[0]-q[0]});for(var n=0;n<l.length;n++){l[n]=l[n].slice(1)}var m=k.attr("data-select-filters").split(",");options=$.extend({},datatableview.defaults,o,{order:l,columns:p,pageLength:k.attr("data-page-length"),infoCallback:function(w,u,t,r,v,q){$("#"+k.attr("data-result-counter-id")).html(parseInt(v).toLocaleString());var s=w.oLanguage.sInfo.replace("_START_",u).replace("_END_",t).replace("_TOTAL_",v);if(r!=v){s+=w.oLanguage.sInfoFiltered.replace("_MAX_",r)}return s},initComplete:function(){this.api().columns().every(function(r){var t=this;var s=k.DataTable().settings().init().columns;var u=s[r].name;if(m.indexOf(u)===-1){return}var q=$('<select><option value=""></option></select>').appendTo($(t.footer()).empty()).on("change",function(){var v=$(this).val();console.log(v);t.search(v?v:"",true,false).draw()});if(typeof jQuery().select2!=="undefined"){q.select2()}t.data().unique().sort().each(function(w,v){q.append('<option value="'+w+'">'+w+"</option>")})})}});if(Object.keys($.fn.dataTable.ext.buttons).length>0){options=$.extend({},options,{dom:"Bfrtip",buttons:[{text:"XLSX",action:function(t,s,r,q){window.location=k.attr("data-source-url")+"?"+$.param($.extend({},s.ajax.params(),{"export":"xlsx",ajax:true}))}},{text:"PDF",action:function(t,s,r,q){window.location=k.attr("data-source-url")+"?"+$.param($.extend({},s.ajax.params(),{"export":"pdf_e",ajax:true}))}}]})}options.ajax=$.extend(options.ajax,{url:k.attr("data-source-url"),type:k.attr("data-ajax-method")||"GET",beforeSend:function(q){q.setRequestHeader("X-CSRFToken",h("csrftoken"))}});options=datatableview.finalizeOptions(k,options);return options}function j(k,l){if(datatableview.checkGlobalConfirmHook){if(window.confirm_datatable_options!==undefined){l=window.confirm_datatable_options(l,k)}}return l}function e(k){var k=$.extend({},k);if(!k.ajaxOptions){k.ajaxOptions={}}if(!k.ajaxOptions.headers){k.ajaxOptions.headers={}}k.ajaxOptions.headers["X-CSRFToken"]=h("csrftoken");k.error=function(m){var l=m.responseJSON;if(l.status=="error"){var n=$.map(l.form_errors,function(p,o){return p.join("\n")});return n.join("\n")}};return function(m,n,l){$("td a[data-xeditable]",m).editable(k);return m}}function h(k){var o=null;if(document.cookie&&document.cookie!=""){var n=document.cookie.split(";");for(var m=0;m<n.length;m++){var l=jQuery.trim(n[m]);if(l.substring(0,k.length+1)==(k+"=")){o=decodeURIComponent(l.substring(k.length+1));break}}}return o}var d={autoInitialize:f,auto_initialize:undefined,checkGlobalConfirmHook:a,defaults:b,initialize:c,getOptions:i,finalizeOptions:j,makeXEditable:e,make_xeditable:e};return d})();$(function(){var a=null;if(datatableview.auto_initialize===undefined){a=datatableview.autoInitialize}else{a=datatableview.auto_initialize}if(a){datatableview.initialize($(".datatable"))}});